<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMART TOURIST INFORMATION</title>
    <script src="../../assets/js/idleTimer.js"></script>

    <script>
        (function () {
            try {
                var contrast = localStorage.getItem('contrastMode'); // '1' | '0' | null
                var low      = localStorage.getItem('lowMode');      // '1' | '0' | null
                var voice      = localStorage.getItem('voiceMode');      // '1' | '0' | null
                var last     = localStorage.getItem('lastMode');     // 'contrast' | 'low' | 'none' | null
                var html     = document.documentElement;

                function applyContrast() {
                    html.classList.add('mode-high-contrast');
                    html.classList.remove('mode-low-posture');
                    html.classList.remove('mode-voice');
                }

                function applyLow() {
                    html.classList.add('mode-low-posture');
                    html.classList.remove('mode-high-contrast');
                    html.classList.remove('mode-voice');
                }

                function applyVoice() {
                    html.classList.add('mode-voice');
                    html.classList.remove('mode-low-posture');
                    html.classList.remove('mode-high-contrast');
                }

                // 1) lastMode 기준으로 우선 적용
                if (last === 'contrast' && contrast === '1') {
                    applyContrast();
                } else if (last === 'low' && low === '1') {
                    applyLow();
                } else if (last === 'voice' && voice === '1') {
                    applyVoice();
                } else {
                    // 2) lastMode 정보가 없거나 꼬였을 때, storage 값으로 복구
                    if (contrast === '1' && low !== '1' && voice !== '1') {
                        applyContrast();
                        localStorage.setItem('lastMode', 'contrast');
                    } else if (low === '1' && contrast !== '1' && voice !== '1') {
                        applyLow();
                        localStorage.setItem('lastMode', 'low');
                    } else if (voice === '1' && contrast !== '1' && low !== '1') {
                        applyVoice();
                        localStorage.setItem('lastMode', 'voice');
                    } else {
                        // 둘 다 1이거나 둘 다 0/없음 → 안전하게 일반 모드
                        html.classList.remove('mode-low-posture');
                        html.classList.remove('mode-high-contrast');
                        html.classList.remove('mode-voice');
                        localStorage.setItem('lastMode', 'none');
                    }
                }
            } catch (e) {
                // localStorage 사용 불가 시 그냥 무시
            }
        })();
    </script>

    <link rel="stylesheet" href="../../assets/scss/vendors/swiper-bundle.min.css">
    <link rel="stylesheet" href="../../assets/scss/main.css">

    <script src="../../assets/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="../../assets/js/vendor/swiper-bundle.min.js"></script>

    <script src="../../assets/js/common.js"></script>
    <script src="../../assets/js/zoom.js"></script>
    <script src="../../assets/js/tab.js"></script>
    <script src="../../assets/js/select.js"></script>
    <script src="../../assets/js/modal.js"></script>
    <script src="../../assets/js/volume.js"></script>
</head>
<body data-tts-summary="메인 메뉴 화면입니다. 관광, 지도, 교통, 음식점 메뉴가 있습니다. 원하는 메뉴를 선택해 주세요. 처음 화면으로 이동 버튼이 있습니다.">
    <div class="zoom-viewport" aria-label="확대 가능한 화면">
        <div class="zoom-move-wrap h1011">
            <div class="zoom-canvas">
                <div class="modal-background">
                <!-- header -->
                <header class="header">
                    <div class="hd-inner">
                        <h1 class="logo">
                            <img src="/assets/images/logo.png" alt="SMART TOURIST INFORMATION">
                        </h1>

                        <div class="status">
                            <div class="datetime">
                                <span class="date">
                                    2025.10.10/<span class="weekday">월요일</span>
                                </span>

                                <div class="clock">
                                    <span class="w_time_h">13</span>
                                    <span class="w_time_bar">:</span>
                                    <span class="w_time_m">13</span>
                                </div>
                            </div>

                            <div class="weather" aria-label="날씨">
                                <img src="/assets/images/icon/w_icon_weather_1.png" alt="맑은 날씨">
                            </div>
                        </div>
                    </div>
                </header>
                <!-- //header -->
                
                <!-- main -->
                <main class="main category">
                    <section class="category-menu-sec">
                        <h2 class="category-title">여행을 시작할 준비가 되셨나요?</h2>
                        <p class="category-desc">여행에 필요한 다양한 관광정보들을 확인할 수 있어요.</p>
                        <!-- 251126 개발 시 각 메뉴 카드의 href를 실제 서브 페이지(관광/지도/교통/음식점) 경로로 교체 필요 -->
                        <ul class="card-btn-list">
                            <li class="card-btn tour">
                                <a href="/html/tour/tour.html" class="card-btn-link" aria-label="관광 메뉴로 이동" data-tts="관광 메뉴로 이동합니다">
                                    <h3 class="card-btn-title">관광</h3>
                                    <p class="card-btn-desc">전국의 주요 관광지, 쇼핑지,<br>전통시장 정보를 확인해보세요.</p>
                                    <span class="arrow-icon" aria-hidden="true"></span>
                                    <span class="category-img" aria-hidden="true"></span>
                                </a>
                            </li>
                            <li class="card-btn map">
                                <a href="/html/map/digital_map.html" class="card-btn-link" aria-label="지도 메뉴로 이동" data-tts="지도 메뉴로 이동합니다">
                                    <h3 class="card-btn-title">지도</h3>
                                    <p class="card-btn-desc">전국 주요 장소를 QR코드로<br>모바일에서 간편하게 확인해보세요.</p>
                                    <span class="arrow-icon" aria-hidden="true"></span>
                                    <span class="category-img" aria-hidden="true"></span>
                                </a>
                            </li>
                            <li class="card-btn traffic">
                                <!-- 251205 1차 수정 : class 추가 -->
                                <a href="/html/traffic/traffic.html" class="card-btn-link traffic-btn" aria-label="교통 메뉴로 이동" data-tts="교통 메뉴로 이동합니다">
                                <!-- //1차 수정 -->
                                    <h3 class="card-btn-title">교통</h3>
                                    <p class="card-btn-desc">실시간 항공 운행 스케줄<br>정보를 확인해보세요.</p>
                                    <span class="arrow-icon" aria-hidden="true"></span>
                                    <span class="category-img" aria-hidden="true"></span>
                                </a>
                            </li>
                            <li class="card-btn restaurant">
                                <a href="/html/restaurant/restaurant.html" class="card-btn-link" aria-label="음식점 메뉴로 이동" data-tts="음식점 메뉴로 이동합니다">
                                    <h3 class="card-btn-title">음식점</h3>
                                    <p class="card-btn-desc">현재 위치 기반의 전국의 지역별<br>추천 음식점 정보를 확인해보세요.</p>
                                    <span class="arrow-icon" aria-hidden="true"></span>
                                    <span class="category-img" aria-hidden="true"></span>
                                </a>
                            </li>
                        </ul>
                        <div class="category-menu-bottom">
                            <!-- 251126 개발 시 인트로(첫 화면) 페이지 경로로 href 교체 필요 -->
                            <!-- 251126 개발 시 JS로 인트로 화면으로 이동 처리할 경우 a 대신 button 사용 필요 -->
                            <a href="/" class="home-btn"  id="homeBtn" aria-label="처음으로 이동" data-tts="처음 화면으로 돌아갑니다.">
                                <span class="icon" aria-hidden="true"></span>
                                <span class="label">처음으로</span>
                            </a>
                        </div>
                    </section>
                </main>
                <!-- //main -->

                </div>

                <!-- 공통 모달 -->
                <div class="global-modal-wrap">
                    <!-- 음량 조절 모달 -->
                    <div class="modal volume-control" aria-hidden="true">
                        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="volumeControlModalTitle">
                            <div id="volumeControlModalTitle" class="modal-title">
                                <strong>음량조절</strong>
                                <span>Sound Control</span>
                            </div>
                            <div class="volume-control-wrap">

                                <!-- 251205 1차 수정 : 구조 수정 -->
                                <div class="volume-btn-wrap">
                                    <button type="button" class="volume-btn down" aria-label="음량 줄이기"></button>
                                    <span class="volume-btn-label">작게</span>
                                </div>
                                <!-- //1차 수정 -->

                                <div class="volume-range">
                                    <label for="volumeRange" class="sr-only">음량 조절 (1단계에서 5단계)</label>
                                    <input type="range" id="volumeRange" class="volume-input" min="0" max="100" step="25" value="50">

                                    <!-- 단계 점 표시 (미래 구간만 보이는 점들) -->
                                    <div class="volume-marks" aria-hidden="true">
                                        <span class="mark" data-value="0"></span>
                                        <span class="mark" data-value="25"></span>
                                        <span class="mark" data-value="50"></span>
                                        <span class="mark" data-value="75"></span>
                                        <span class="mark" data-value="100"></span>
                                    </div>
                                </div>

                                <!-- 251205 1차 수정 : 구조 수정 -->
                                <div class="volume-btn-wrap">
                                    <button type="button" class="volume-btn up" aria-label="음량 높이기"></button>
                                    <span class="volume-btn-label">크게</span>
                                </div>
                                <!-- //1차 수정 -->
                            </div>
                            <div class="modal-btn-wrap">
                                <button type="button" class="close-btn">닫기</button>
                            </div>
                        </div>
                    </div>

                    <!-- 교통 검색 모달 -->
                    <div class="modal traffic" aria-hidden="true" data-tts="교통편 검색을 위한 팝업입니다.">
                        <div class="modal-content" role="dialog" aria-modal="true" tabindex="1" aria-labelledby="trafficModalTitle">
                            <div id="trafficModalTitle" class="modal-title">
                                <strong>교통</strong>
                            </div>
                            <div class="tab-menu tab02">
                                <ul class="tab-list" role="tablist">
                                    <li class="is-active">
                                        <button id="tabMenu01" type="button" class="tab-btn" role="tab" aria-selected="true" aria-controls="panelMenu01" aria-label="항공편 검색 옵션입니다.">항공</button>
                                    </li>
                                    <!-- 251121 2차 개발 시 추가 될 탭 메뉴 -->
                                    <!-- <li>
                                        <button id="tabMenu02" type="button" class="tab-btn" role="tab" aria-selected="false" aria-controls="panelMenu02">열차</button>
                                    </li> -->
                                </ul>
                                <div class="tab-cont">
                                    <!-- 항공 -->
                                    <section id="panelMenu01" class="tab-panel is-active" role="tabpanel" aria-labelledby="tabMenu01">
                                        <div class="tab-menu line">
                                            <ul class="tab-list" role="tablist">
                                                <li class="is-active">
                                                    <button id="DepartureTab" type="button" class="tab-btn" role="tab" aria-selected="true" aria-controls="DeparturePanel" aria-label="출발">출발</button>
                                                </li>
                                                <li>
                                                    <button id="ArrivalTab" type="button" class="tab-btn" role="tab" aria-selected="false" aria-controls="ArrivalPanel" aria-label="도착">도착</button>
                                                </li>
                                            </ul>
                                            <div class="tab-cont">
                                                <!-- 출발 -->
                                                <section id="DeparturePanel" class="tab-panel is-active" role="tabpanel" aria-labelledby="DepartureTab">
                                                    <div class="filter-menu">
                                                        <ul class="filter-list" role="radiogroup">
                                                            <li class="is-active">
                                                                <button type="button" role="radio" aria-checked="true" class="filter-btn" data-code="ICN1" aria-label="인천 1 터미널">인천 T1</button>
                                                            </li>
                                                            <li>
                                                                <button type="button" role="radio" aria-checked="false" class="filter-btn" data-code="ICN2" aria-label="인천 2 터미널">인천 T2</button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </section>
                                                <!-- //출발 -->
                                                
                                                <!-- 도착 -->
                                                <section id="ArrivalPanel" class="tab-panel" role="tabpanel" aria-labelledby="ArrivalTab">
                                                    <div class="filter-menu">
                                                        <ul class="filter-list" role="radiogroup">
                                                            <li class="is-active">
                                                                <button type="button" role="radio" aria-checked="true" class="filter-btn" data-code="ICN1" aria-label="인천 1 터미널">인천 T1</button>
                                                            </li>
                                                            <li>
                                                                <button type="button" role="radio" aria-checked="false" class="filter-btn" data-code="ICN2" aria-label="인천 2 터미널">인천 T2</button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </section>
                                                <!-- //도착 -->
                                            </div>
                                        </div>
                                    </section>
                                    <!-- 251121 2차 개발 시 추가 될 탭 메뉴 -->
                                    <!-- 열차 -->
                                    <!-- <section id="panelMenu02" class="tab-panel" role="tabpanel" aria-labelledby="tabMenu02"></section> -->
                                </div>
                            </div>
                            <div class="modal-btn-wrap">
                                <button type="button" class="close-btn" aria-label="닫기">닫기</button>
                                <button type="button" class="apply-btn" aria-label="적용">적용</button>
                            </div>
                        </div>
                    </div>

                    <!-- 무동작 초기화면 복귀 모달 -->
                    <div class="modal idle-reset" aria-hidden="true">
                        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="idleResetModalTitle">
                            <div id="idleResetModalTitle" class="modal-title">
                                <strong>잠시 후 처음 화면으로 돌아갑니다.</strong>
                                <p>계속 이용하시려면 화면을 터치해 주세요.</p>
                            </div>
                            <div class="countdown-wrap">
                                <strong class="countdown-num">30</strong>
                            </div>
                            <div class="modal-btn-wrap">
                                <!-- <button type="button" class="return-home-btn">처음으로</button> -->
                                <style>
                                    .modal .modal-btn-wrap button.return-stay-btn {
                                        width: 100%;
                                        border-radius: 8px;
                                        border: 1px solid #888;
                                        color: #000;
                                    }
                                </style>
                                <button type="button" class="close-btn return-stay-btn">연장하기</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- //공통 모달 -->
                
                <!-- footer -->
                <footer class="footer">
                    <div class="ft-inner">
                        <p class="copyright">©SMART TOURIST. ALL RIGHT RESERVED.</p>
                        <div class="btn-wrap">
                            <button type="button" class="volume-control-btn" aria-label="음량 조절 열기">
                                <span class="volume-icon" aria-hidden="true"></span>
                                <span class="btn-label">음량조절</span>
                            </button>
                            <button type="button" class="zoom-btn" aria-pressed="false" aria-label="돋보기 모드 켜기">
                                <span class="zoom-icon" aria-hidden="true"></span>
                                <span class="btn-label">돋보기</span>
                            </button>
                        </div>
                    </div>
                </footer>
                <!-- //footer -->
            </div>

            <!-- 251215 로딩화면 추가 -->
            <!-- 로딩화면 -->
            <div class="loading is-hidden" role="status" aria-live="polite" aria-atomic="true">
                <div class="loading-content">
                    <strong class="loading-title">화면 로딩 중 입니다.</strong>
                    <p class="loading-desc">잠시만 기다려 주세요.</p>
                </div>
            </div>

            <!-- 상하좌우 이동 버튼 -->
            <div class="viewport-controller">
                <div class="btn-wrap">
                    <button type="button" class="zoom-control move-up" aria-label="위로 이동">
                        <span class="icon" aria-hidden="true"></span>
                        <span class="label">위로</span>
                    </button>
                </div>
                <div class="btn-wrap">
                    <button type="button" class="zoom-control move-left" aria-label="좌측으로 이동">
                        <span class="icon" aria-hidden="true"></span>
                        <span class="label">좌측으로</span>
                    </button>
                </div>
                <div class="btn-wrap">
                    <button type="button" class="zoom-control move-right" aria-label="우측으로 이동">
                        <span class="icon" aria-hidden="true"></span>
                        <span class="label">우측으로</span>
                    </button>
                </div>
                <div class="btn-wrap">
                    <button type="button" class="zoom-control move-down" aria-label="아래로 이동">
                        <span class="icon" aria-hidden="true"></span>
                        <span class="label">아래로</span>
                    </button>
                </div>
                <div class="btn-wrap">
                    <button type="button" class="zoom-control zoom-exit-btn">
                        <span class="icon" aria-hidden="true"></span>
                        <span class="label">돋보기 종료</span>
                    </button>
                </div>
            </div>
            <!-- //상하좌우 이동 버튼 -->
        </div>
    </div>
    <script>
    document.addEventListener('click', function (e) {
        const link = e.target.closest('a[data-tts]');
        if (!link) return;

        const isVoice = document.documentElement.classList.contains('mode-voice');
        if (!isVoice) return;

        e.preventDefault(); // 바로 이동 막기

        const text = link.dataset.tts;
        const href = link.getAttribute('href');

        if (!text || !href) {
            location.href = href;
            return;
        }

        // TTS 먼저
        TTS.speak(text);

        // ⏱ 음성 길이에 따라 이동 (대략 계산)
        const delay = Math.max(1200, text.length * 120);

        setTimeout(() => {
            location.href = href;
        }, delay);
    }, true);
    </script>
</body>
</html>